--- 
layout: post
title: "\xE5\xA6\x82\xE4\xBD\x95\xE5\x88\xA4\xE6\x96\xAD\xE4\xB8\x80\xE4\xB8\xAA\xE8\xAF\xB7\xE6\xB1\x82\xE6\x98\xAF\xE5\x90\xA6\xE4\xB8\xBAAJAX\xE8\xAF\xB7\xE6\xB1\x82"
excerpt: "\xE5\xA6\x82\xE4\xBD\x95\xE5\x88\xA4\xE6\x96\xAD\xE4\xB8\x80\xE4\xB8\xAA\xE8\xAF\xB7\xE6\xB1\x82\xE6\x98\xAF\xE5\x90\xA6\xE4\xB8\xBAAJAX\xE8\xAF\xB7\xE6\xB1\x82\r\n\
  \xE6\x88\x91\xE4\xBB\xAC\xE5\xA6\x82\xE6\x9E\x9C\xE9\x80\x9A\xE8\xBF\x87X-Requested-With\"=\"XMLHttpRequest\xE2\x80\x9D\xE6\x9D\xA5\xE6\xA0\x87\xE8\xAF\x86\xE8\xBF\x99\xE4\xB8\xAA\xE8\xAF\xB7\xE6\xB1\x82\xE6\x98\xAFajax\xE7\x9A\x84\xE8\xAF\xB7\xE6\xB1\x82\xE3\x80\x82\xE5\xA6\x82\xE6\x9E\x9C\xE6\x9C\x8D\xE5\x8A\xA1\xE5\x99\xA8\xE7\xA1\xAC\xE6\x98\xAF\xE8\xA6\x81\xE5\x8C\xBA\xE5\x88\x86\xE7\x9A\x84\xE8\xAF\x9D\xEF\xBC\x8C\xE5\xB0\xB1\xE5\x8F\xAF\xE4\xBB\xA5\xE9\x80\x9A\xE8\xBF\x87\xE8\x8E\xB7\xE5\x8F\x96\xE8\xAF\xA5\xE5\xA4\xB4\xE9\x83\xA8\xE6\x9D\xA5\xE5\x88\xA4\xE6\x96\xAD\xE3\x80\x82"
wordpress_id: 582
wordpress_url: http://www.wsria.com/?p=582
date: 2009-06-22 11:26:58 +08:00
---
昨天在搞一个系统的时候遇到一个问题，我要在后台判断这个请求来自哪里，就是说是通过URL直接访问的呢还是通过AJAX方式访问的，以此来判断该怎么处理和响应，在群里面询问了一下也没有人知道，后来就想修改JQUERY的源码，就是在提交的时候在URL中加入自定义的AJAX请求标示，但是想想这样做不太好，破坏了JQUERY的完整性；继续在搜索，后来终于发现了，哈哈
<blockquote>那么服务器如果区别这个请求是ajax呢？因为同步和异步ajax的请求的头文件是一样的。我们如果通过X-Requested-With"="XMLHttpRequest”来标识这个请求是ajax的请求。如果服务器硬是要区分的话，就可以通过获取该头部来判断。</blockquote>
这是来自一篇JQUERY的AJAX请求的文章，这样我在后台获取header属性中的"X-Requested-With"就可以知道是什么类型的请求了
附上Java代码：
<pre lang="java">
/**
 * 判断是否为Ajax请求
 * @param request	HttpServletRequest
 * @return	是true, 否false
 */
public static boolean isAjaxRequest(HttpServletRequest request) {
	String requestType = request.getHeader("X-Requested-With");
	if (requestType != null && requestType.equals("XMLHttpRequest")) {
		return true;
	} else {
		return false;
	}
}
</pre>
